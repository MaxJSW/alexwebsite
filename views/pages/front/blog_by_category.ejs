<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Articles : <%= currentCategory %> | Spirit of Freedom Kennel</title>
        <meta name="description" content="Retrouvez tous les articles de la catégorie <%= currentCategory %> sur le blog de Spirit of Freedom Kennel, élevage canin dans le Gard." />
        <meta name="keywords" content="<%= currentCategory %>, spirit of freedom kennel, american bully, élevage canin gard, blog élevage, codognan" />
        <meta name="author" content="Spirit of Freedom Kennel" />
        <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
        <meta name="googlebot" content="index, follow" />
        <link rel="canonical" href="https://spiritoffreedomkennel.com/blog/categorie/<%= categorySlug %><%= currentPage > 1 ? '?page=' + currentPage : '' %>" />
        <% if (currentPage > 1) { %>
        <link rel="prev" href="https://spiritoffreedomkennel.com/blog/categorie/<%= categorySlug %><%= currentPage > 2 ? '?page=' + (currentPage - 1) : '' %>" />
        <% } %>
        <% if (currentPage < totalPages) { %>
        <link rel="next" href="https://spiritoffreedomkennel.com/blog/categorie/<%= categorySlug %>?page=<%= currentPage + 1 %>" />
        <% } %>
        <meta name="language" content="fr" />
        <meta name="geo.region" content="FR-30" />
        <meta name="geo.placename" content="Codognan, Gard" />
        <meta property="og:type" content="website" />
        <meta property="og:site_name" content="Spirit of Freedom Kennel" />
        <meta property="og:title" content="Articles : <%= currentCategory %> | Spirit of Freedom Kennel" />
        <meta property="og:description" content="Retrouvez tous les articles de la catégorie <%= currentCategory %> sur le blog de Spirit of Freedom Kennel." />
        <meta property="og:url" content="https://spiritoffreedomkennel.com/blog/categorie/<%= categorySlug %>" />
        <meta property="og:image" content="https://spiritoffreedomkennel.com/img/og/og-image.webp" />
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="630" />
        <meta property="og:locale" content="fr_FR" />
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:title" content="Articles : <%= currentCategory %> | Spirit of Freedom Kennel" />
        <meta name="twitter:description" content="Retrouvez tous les articles de la catégorie <%= currentCategory %> sur le blog de Spirit of Freedom Kennel." />
        <meta name="twitter:image" content="https://spiritoffreedomkennel.com/img/og/og-image.webp" />
        <%- include('../front/partials/head-meta-base.ejs') %>
        <%- include('../front/partials/head-fonts-libs.ejs') %>
        <link rel="stylesheet" href="/front/css/navbar.css" />
        <link rel="stylesheet" href="/front/css/blog-by-category.css" />
    </head>
    <body class="h-100">
        <%- include('../front/frontEndAssets/header') %>
        <main style="padding-top: 70px;">
            <div class="blog-breadcrumb-mobile">
                <div class="container">
                    <div class="blog-breadcrumb">
                        <a href="/blog"><i class="fas fa-newspaper me-1"></i>Blog</a>
                        <span class="breadcrumb-sep">›</span>
                        <a href="/blog/categories"><i class="fas fa-folder me-1"></i>Catégories</a>
                        <span class="breadcrumb-sep">›</span>
                        <span><%= currentCategory %></span>
                    </div>
                </div>
            </div>
            <section class="bbc-hero">
                <div class="container">
                    <div class="blog-breadcrumb bbc-hero-breadcrumb desktop-only">
                        <a href="/blog"><i class="fas fa-newspaper me-1"></i>Blog</a>
                        <span class="breadcrumb-sep">›</span>
                        <a href="/blog/categories"><i class="fas fa-folder me-1"></i>Catégories</a>
                        <span class="breadcrumb-sep">›</span>
                        <span><%= currentCategory %></span>
                    </div>
                    <div class="bbc-hero-content" >
                        <div class="bbc-hero-icon">
                            <i class="fas fa-folder-open"></i>
                        </div>
                        <div class="bbc-hero-text">
                            <p class="bbc-hero-label">Catégorie</p>
                            <h1 class="bbc-hero-title"><%= currentCategory %></h1>
                            <p class="bbc-hero-count">
                                <span><%= totalItems %></span> article<%= totalItems > 1 ? 's' : '' %> dans cette catégorie
                            </p>
                        </div>
                    </div>
                    <div class="bbc-categories-filter" >
                        <a href="/blog" class="bbc-filter-btn">
                        <i class="fas fa-th me-1"></i>Tous
                        </a>
                        <% categories.forEach(category => { %>
                        <% if (category.count > 0) { %>
                        <a href="/blog/categorie/<%= category.category_slug %>" 
                            class="bbc-filter-btn <%= category.category_slug === categorySlug ? 'active' : '' %>">
                        <i class="fas fa-folder me-1"></i><%= category.content %>
                        <span class="bbc-filter-count"><%= category.count %></span>
                        </a>
                        <% } %>
                        <% }); %>
                    </div>
                </div>
            </section>
            <section class="bbc-content-section">
                <div class="container">
                    <% if (blogs && blogs.length > 0) { %>
                    <div class="bbc-grid" data-aos="fade-up">
                        <% blogs.forEach((blog, index) => { %>
                        <%
                            let cardImageSrc;
                            if (blog.optimized_image_path) {
                                cardImageSrc = '/uploads/optimized/' + blog.optimized_image_path;
                            } else if (blog.image_path) {
                                cardImageSrc = '/uploads/' + blog.image_path;
                            } else {
                                cardImageSrc = '/img/placeholder-blog.webp';
                            }
                            const cardDate = new Date(blog.date_creation).toLocaleDateString('fr-FR', {
                                day: 'numeric',
                                month: 'long',
                                year: 'numeric'
                            });
                            const keywords = blog.keywords_with_count ? blog.keywords_with_count.split(',').map(k => {
                                const parts = k.split(':');
                                return { content: parts[0], slug: parts[1] };
                            }) : [];
                            %>
                        <article class="bbc-card" data-aos="fade-up" data-aos-delay="<%= index * 50 %>">
                            <a href="/blog/<%= blog.slug %>" class="bbc-card-image-wrap">
                                <img src="<%= cardImageSrc %>"
                                    alt="<%= blog.balise_alt || blog.titre %>"
                                    onerror="this.onerror=null; this.src='/img/placeholder-blog.webp';">
                                <div class="bbc-card-image-overlay">
                                    <span class="bbc-card-read-btn">
                                    <i class="fas fa-arrow-right"></i>
                                    </span>
                                </div>
                                <div class="bbc-card-category-badge">
                                    <i class="fas fa-folder me-1"></i><%= blog.category_content %>
                                </div>
                            </a>
                            <div class="bbc-card-body">
                                <div class="bbc-card-meta">
                                    <span class="bbc-card-meta-item">
                                    <i class="fas fa-calendar-alt"></i><%= cardDate %>
                                    </span>
                                    <% if (blog.likes > 0) { %>
                                    <span class="bbc-card-meta-sep">•</span>
                                    <span class="bbc-card-meta-item">
                                    <i class="fas fa-heart"></i><%= blog.likes %>
                                    </span>
                                    <% } %>
                                </div>
                                <h2 class="bbc-card-title">
                                    <a href="/blog/<%= blog.slug %>"><%= blog.titre %></a>
                                </h2>
                                <% if (blog.preview) { %>
                                <p class="bbc-card-preview"><%= blog.preview.length > 160 ? blog.preview.substring(0, 160) + '...' : blog.preview %></p>
                                <% } %>
                                <% if (keywords.length > 0) { %>
                                <div class="bbc-card-tags">
                                    <% keywords.slice(0, 3).forEach(tag => { %>
                                    <a href="/blog/tag/<%= tag.slug %>" class="bbc-card-tag">
                                    <%= tag.content %>
                                    </a>
                                    <% }); %>
                                    <% if (keywords.length > 3) { %>
                                    <span class="bbc-card-tag-more">+<%= keywords.length - 3 %></span>
                                    <% } %>
                                </div>
                                <% } %>
                                <a href="/blog/<%= blog.slug %>" class="bbc-card-link">
                                Lire l'article <i class="fas fa-arrow-right ms-1"></i>
                                </a>
                            </div>
                        </article>
                        <% }); %>
                    </div>
                    <% if (totalPages > 1) { %>
                    <div class="bbc-pagination" data-aos="fade-up">
                        <% if (currentPage > 1) { %>
                        <a href="/blog/categorie/<%= categorySlug %>?page=<%= currentPage - 1 %>" class="bbc-page-btn bbc-page-prev">
                        <i class="fas fa-chevron-left"></i>
                        </a>
                        <% } %>
                        <div class="bbc-page-numbers">
                            <% for (let i = 1; i <= totalPages; i++) { %>
                            <% if (
                                i === 1 ||
                                i === totalPages ||
                                (i >= currentPage - 1 && i <= currentPage + 1)
                                ) { %>
                            <a href="/blog/categorie/<%= categorySlug %><%= i === 1 ? '' : '?page=' + i %>"
                                class="bbc-page-number <%= i === currentPage ? 'active' : '' %>">
                            <%= i %>
                            </a>
                            <% } else if (i === currentPage - 2 || i === currentPage + 2) { %>
                            <span class="bbc-page-dots">…</span>
                            <% } %>
                            <% } %>
                        </div>
                        <% if (hasNextPage) { %>
                        <a href="/blog/categorie/<%= categorySlug %>?page=<%= currentPage + 1 %>" class="bbc-page-btn bbc-page-next">
                        <i class="fas fa-chevron-right"></i>
                        </a>
                        <% } %>
                    </div>
                    <% } %>
                    <% } else { %>
                    <div class="bbc-empty" data-aos="fade-up">
                        <div class="bbc-empty-icon">
                            <i class="fas fa-folder-open"></i>
                        </div>
                        <h2 class="bbc-empty-title">Aucun article dans cette catégorie</h2>
                        <p class="bbc-empty-text">Cette catégorie ne contient pas encore d'articles publiés.</p>
                        <a href="/blog" class="bbc-empty-btn">
                        <i class="fas fa-newspaper me-2"></i>Retour au blog
                        </a>
                    </div>
                    <% } %>
                </div>
            </section>
        </main>
        <%- include('../front/frontEndAssets/footer') %>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
        <script src="/front/js/header.js"></script>
        <%- include('./partials/googleAnalytics') %>
        <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
        <script>
            AOS.init({
                duration: 1000,
                easing: "ease-in-out",
                once: true,
                offset: 120,
                delay: 0,
                anchorPlacement: "top-bottom",
                mirror: false,
                disable: "mobile",
            });
        </script>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const toggleBtn = document.getElementById("dogFiltersToggle");
                const menu = document.getElementById("dogFiltersMenu");
            
                if (toggleBtn && menu) {
                    toggleBtn.addEventListener("click", function () {
                        menu.classList.toggle("active");
                        toggleBtn.classList.toggle("active");
                    });
                    document.addEventListener("click", function (e) {
                        if (!toggleBtn.contains(e.target) && !menu.contains(e.target)) {
                            menu.classList.remove("active");
                            toggleBtn.classList.remove("active");
                        }
                    });
                }
            });
        </script>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const toggleBtn = document.getElementById("mobileFiltersToggle");
                const categoriesList = document.getElementById("blogCategoriesList");
            
                if (toggleBtn && categoriesList) {
                    toggleBtn.addEventListener("click", function () {
                        categoriesList.classList.toggle("active");
                        toggleBtn.classList.toggle("active");
                    });
                    document.addEventListener("click", function (e) {
                        if (!toggleBtn.contains(e.target) && !categoriesList.contains(e.target)) {
                            categoriesList.classList.remove("active");
                            toggleBtn.classList.remove("active");
                        }
                    });
                }
            });
        </script>
    </body>
</html>