<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Mariage <%= father.name %> x <%= mother.name %> - <%= father.breed.name %></title>
    <meta name="description" content="<%= marriage.description || 'Découvrez la portée de ' + father.name + ' et ' + mother.name + ', ' + father.breed.name + (father.breed.type ? ' ' + father.breed.type : '') + '. ' + (marriage.totalPuppies || 0) + ' chiot(s) ' + father.breed.name.toLowerCase() + ' issu(s) de notre élevage familial en Occitanie.' %>">
    <meta name="keywords" content="mariage <%= father.breed.name.toLowerCase() %>, portée <%= father.name %> <%= mother.name %>, chiots <%= father.breed.name.toLowerCase() %><% if (father.breed.type) { %> <%= father.breed.type.toLowerCase() %><% } %>, <%= father.color.toLowerCase() %>, <%= mother.color.toLowerCase() %>, élevage <%= father.breed.name.toLowerCase() %>, élevage de bel air">
    <meta name="author" content="Élevage de Bel Air">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="googlebot" content="index, follow">
    <link rel="canonical" href="https://elevagedebelair.com/mariages/<%= father.breed.slug %>/<%= marriage.slug %>">
    <meta name="language" content="fr">
    <meta name="geo.region" content="FR-OCC">
    <meta name="geo.placename" content="Occitanie, France">
    <meta property="og:type" content="article">
    <meta property="og:site_name" content="Élevage de Bel Air">
    <meta property="og:title" content="Mariage <%= father.name %> x <%= mother.name %> | <%= father.breed.name %>">
    <meta property="og:description" content="Portée <%= father.breed.name %><% if (father.breed.type) { %> <%= father.breed.type %><% } %> - <%= marriage.totalPuppies || 0 %> chiot(s). Élevage de Bel Air en Occitanie.">
    <meta property="og:url" content="https://elevagedebelair.com/mariages/<%= father.breed.slug %>/<%= marriage.slug %>">
    <meta property="og:image" content="<%= marriage.image.path ? 'https://elevagedebelair.com' + marriage.image.path : 'https://elevagedebelair.com/img/og/og-image.webp' %>">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Mariage <%= father.name %> x <%= mother.name %> - <%= father.breed.name %>">
    <meta property="og:locale" content="fr_FR">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Mariage <%= father.name %> x <%= mother.name %>">
    <meta name="twitter:description" content="Portée <%= father.breed.name %> - Élevage de Bel Air">
    <meta name="twitter:image" content="<%= marriage.image.path ? 'https://elevagedebelair.com' + marriage.image.path : 'https://elevagedebelair.com/img/og/og-image.webp' %>">
    <meta name="twitter:image:alt" content="<%= father.name %> x <%= mother.name %>">
<%- include('../front/partials/head-meta-base.ejs') %>
<%- include('../front/partials/head-fonts-libs.ejs') %>
    <link rel="stylesheet" href="/front/css/navbar.css">
    <link rel="stylesheet" href="/front/css/mariages-details.css">
</head>
    <body class="h-100">
        <%- include('../front/frontEndAssets/header') %>
        <main style="padding-top: 70px;">
           <section class="page-hero-simple">
                <div class="page-hero-overlay"></div>
                <div class="container">
                    <div class="page-hero-content">
                        <h1 class="page-hero-title">Portée <%= father.breed.name %></h1>
                        <p class="page-hero-subtitle">
                            Découvrez la magnifique portée de <%= father.name %> et <%= mother.name %>. 
                            <% if (marriage.totalPuppies > 0) { %>
                                <%= marriage.totalPuppies %> chiot<%= marriage.totalPuppies > 1 ? 's' : '' %> <%= father.breed.name %> 
                            <% } %>, socialisé<%= marriage.totalPuppies > 1 ? 's' : '' %> et élevé<%= marriage.totalPuppies > 1 ? 's' : '' %> avec soin dans un environnement familial.<br>
                            <% if (marriage.availablePuppies > 0) { %>
                                <%= marriage.availablePuppies %> chiot<%= marriage.availablePuppies > 1 ? 's' : '' %> disponible<%= marriage.availablePuppies > 1 ? 's' : '' %> à la réservation.
                            <% } %>
                        </p>
                    </div>
                </div>
            </section>
            <section class="marriage-hero-section">
                <div class="container">
                    <div class="row align-items-center g-4">
                        <div class="col-lg-6" data-aos="fade-right">
                            <div class="marriage-hero-content">
                                <nav aria-label="breadcrumb" class="marriage-breadcrumb">
                                    <ol class="breadcrumb">
                                        <li class="breadcrumb-item"><a href="/mariages">Mariages</a></li>
                                        <li class="breadcrumb-item"><a href="/mariages/<%= father.breed.slug %>"><%= father.breed.name %></a></li>
                                        <li class="breadcrumb-item active text-success" aria-current="page"><%= marriage.title %></li>
                                    </ol>
                                </nav>
                                <h1 class="marriage-hero-title">
                                    <%= father.name %> <span class="x-separator">×</span> <%= mother.name %>
                                </h1>
                                <div class="marriage-hero-breed">
                                    <i class="fas fa-paw"></i>
                                    <span><%= father.breed.name %></span>
                                </div>
                                <div class="marriage-hero-info-grid">
                                    <% if (marriage.birthDate) { %>
                                    <div class="marriage-info-card">
                                        <div class="info-icon">
                                            <i class="fas fa-calendar-day"></i>
                                        </div>
                                        <div class="info-content">
                                            <span class="info-label">Date de naissance</span>
                                            <span class="info-value"><%= marriage.birthDate %></span>
                                        </div>
                                    </div>
                                    <% } %>
                                    <% if (marriage.availableDate) { %>
                                    <div class="marriage-info-card">
                                        <div class="info-icon">
                                            <i class="fas fa-home"></i>
                                        </div>
                                        <div class="info-content">
                                            <span class="info-label">Disponibles dès le</span>
                                            <span class="info-value"><%= marriage.availableDate %></span>
                                        </div>
                                    </div>
                                    <% } %>
                                    <div class="marriage-info-card">
                                        <div class="info-icon">
                                            <i class="fas fa-baby"></i>
                                        </div>
                                        <div class="info-content">
                                            <span class="info-label">Nombre de chiots</span>
                                            <span class="info-value"><%= marriage.totalPuppies || marriage.expectedPuppies || 0 %></span>
                                        </div>
                                    </div>
                                    <% if (marriage.availablePuppies > 0) { %>
                                    <div class="marriage-info-card highlight">
                                        <div class="info-icon">
                                            <i class="fas fa-star"></i>
                                        </div>
                                        <div class="info-content">
                                            <span class="info-label">Chiots disponibles</span>
                                            <span class="info-value"><%= marriage.availablePuppies %></span>
                                        </div>
                                    </div>
                                    <% } %>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6" data-aos="fade-left">
                            <div class="marriage-hero-image">
                                <img src="<%= marriage.image.path %>" 
                                    alt="Mariage <%= father.name %> × <%= mother.name %>" 
                                    onerror="this.onerror=null; this.src='/img/placeholder-marriage.jpg';" />
                                <% 
                                let statusClass = '';
                                let statusIcon = '';
                                let statusText = '';
                                if (marriage.status === 'Programmé') {
                                    statusClass = 'status-planned';
                                    statusIcon = 'fa-calendar-check';
                                    statusText = 'Programmée';
                                } else if (marriage.status === 'En Cours') {
                                    statusClass = 'status-progress';
                                    statusIcon = 'fa-heart-pulse';
                                    statusText = 'En cours';
                                } else if (marriage.status === 'Confirmé') {
                                    statusClass = 'status-born';
                                    statusIcon = 'fa-baby';
                                    statusText = 'Confirmée';
                                } else if (marriage.status === 'Archivé') {
                                    statusClass = 'status-completed';
                                    statusIcon = 'fa-check-circle';
                                    statusText = 'Portée Archivée';
                                }
                                %>
                                <div class="marriage-status-badge-hero <%= statusClass %>">
                                    <i class="fas <%= statusIcon %>"></i>
                                    <span><%= statusText %></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="marriage-contact-section">
                <div class="container">
                    <div class="marriage-contact-box" data-aos="fade-up">
                        <div class="contact-box-content">
                            <p class="contact-text">
                                Vous souhaitez réserver un chiot de cette portée ?
                            </p>
                            <a href="/contact" class="btn-marriage-contact">
                                <i class="fas fa-envelope"></i>
                                <span>Nous Contacter</span>
                                <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </section>
            <section class="marriage-parents-section">
                <div class="container">
                    <div class="section-header" data-aos="fade-up">
                        <h2 class="section-title">Les Parents</h2>
                        <p class="section-subtitle">Découvrez les reproducteurs de cette magnifique portée</p>
                    </div>
                    <div class="row g-4">
                        <div class="col-lg-6" data-aos="fade-right">
                            <article class="parent-card">
                                <div class="parent-card-header">
                                    <div class="parent-image">
                                        <img src="<%= father.image.path %>" 
                                             alt="<%= father.image.alt || father.name %>" 
                                             onerror="this.onerror=null; this.src='/img/placeholder-dog.jpg';" />
                                        <div class="parent-gender-badge male">
                                            <i class="fas fa-mars"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="parent-card-body">
                                    <h3 class="parent-name">
                                        <a href="/chiens/<%= father.breed.slug %>/<%= father.slug %>">
                                            <%= father.name %>
                                        </a>
                                    </h3>
                                    <div class="parent-role">
                                        <i class="fas fa-paw"></i>
                                        <span>Père</span>
                                    </div>
                                    <div class="parent-info-grid">
                                        <div class="parent-info-item">
                                            <span class="info-label">Race</span>
                                            <span class="info-value"><%= father.breed.name %></span>
                                        </div>
                                        <% if (father.breed.type) { %>
                                        <div class="parent-info-item">
                                            <span class="info-label">Type</span>
                                            <span class="info-value"><%= father.breed.type %></span>
                                        </div>
                                        <% } %>
                                        <% if (father.color) { %>
                                        <div class="parent-info-item">
                                            <span class="info-label">Couleur</span>
                                            <span class="info-value"><%= father.color %></span>
                                        </div>
                                        <% } %>
                                        <% if (father.eyeColor) { %>
                                        <div class="parent-info-item">
                                            <span class="info-label">Yeux</span>
                                            <span class="info-value"><%= father.eyeColor %></span>
                                        </div>
                                        <% } %>
                                        <% if (father.coatType) { %>
                                        <div class="parent-info-item">
                                            <span class="info-label">Poil</span>
                                            <span class="info-value"><%= father.coatType %></span>
                                        </div>
                                        <% } %>
                                        <% if (father.country) { %>
                                        <div class="parent-info-item">
                                            <span class="info-label">Origine</span>
                                            <span class="info-value"><%= father.country %></span>
                                        </div>
                                        <% } %>
                                        <% if (father.register) { %>
                                        <div class="parent-info-item">
                                            <span class="info-label">Registre</span>
                                            <span class="info-value"><%= father.register %></span>
                                        </div>
                                        <% } %>
                                    </div>
                                    <% if (father.description) { %>
                                    <div class="parent-description">
                                        <p><%= father.description.substring(0, 150) %><%= father.description.length > 150 ? '...' : '' %></p>
                                    </div>
                                    <% } %>
                                    <a href="/chiens/<%= father.breed.slug %>/<%= father.slug %>" class="btn-parent-profile">
                                        Voir le profil complet
                                        <i class="fas fa-arrow-right"></i>
                                    </a>
                                </div>
                            </article>
                        </div>
                        <div class="col-lg-6" data-aos="fade-left">
                            <article class="parent-card">
                                <div class="parent-card-header">
                                    <div class="parent-image">
                                        <img src="<%= mother.image.path %>" 
                                             alt="<%= mother.image.alt || mother.name %>" 
                                             onerror="this.onerror=null; this.src='/img/placeholder-dog.jpg';" />
                                        <div class="parent-gender-badge female">
                                            <i class="fas fa-venus"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="parent-card-body">
                                    <h3 class="parent-name">
                                        <a href="/chiens/<%= mother.breed.slug %>/<%= mother.slug %>">
                                            <%= mother.name %>
                                        </a>
                                    </h3>
                                    <div class="parent-role">
                                        <i class="fas fa-paw"></i>
                                        <span>Mère</span>
                                    </div>
                                    <div class="parent-info-grid">
                                        <div class="parent-info-item">
                                            <span class="info-label">Race</span>
                                            <span class="info-value"><%= mother.breed.name %></span>
                                        </div>
                                        <% if (mother.breed.type) { %>
                                        <div class="parent-info-item">
                                            <span class="info-label">Type</span>
                                            <span class="info-value"><%= mother.breed.type %></span>
                                        </div>
                                        <% } %>
                                        <% if (mother.color) { %>
                                        <div class="parent-info-item">
                                            <span class="info-label">Couleur</span>
                                            <span class="info-value"><%= mother.color %></span>
                                        </div>
                                        <% } %>
                                        <% if (mother.eyeColor) { %>
                                        <div class="parent-info-item">
                                            <span class="info-label">Yeux</span>
                                            <span class="info-value"><%= mother.eyeColor %></span>
                                        </div>
                                        <% } %>
                                        <% if (mother.coatType) { %>
                                        <div class="parent-info-item">
                                            <span class="info-label">Poil</span>
                                            <span class="info-value"><%= mother.coatType %></span>
                                        </div>
                                        <% } %>
                                        <% if (mother.country) { %>
                                        <div class="parent-info-item">
                                            <span class="info-label">Origine</span>
                                            <span class="info-value"><%= mother.country %></span>
                                        </div>
                                        <% } %>
                                        <% if (mother.register) { %>
                                        <div class="parent-info-item">
                                            <span class="info-label">Registre</span>
                                            <span class="info-value"><%= mother.register %></span>
                                        </div>
                                        <% } %>
                                    </div>
                                    <% if (mother.description) { %>
                                    <div class="parent-description">
                                        <p><%= mother.description.substring(0, 150) %><%= mother.description.length > 150 ? '...' : '' %></p>
                                    </div>
                                    <% } %>
                                    <a href="/chiens/<%= mother.breed.slug %>/<%= mother.slug %>" class="btn-parent-profile">
                                        Voir le profil complet
                                        <i class="fas fa-arrow-right"></i>
                                    </a>
                                </div>
                            </article>
                        </div>
                    </div>
                </div>
            </section>
            <section class="marriage-puppies-section">
                <div class="container">
                    <div class="section-header" data-aos="fade-up">
                        <h2 class="section-title">Les Chiots de cette Portée</h2>
                        <% if (puppies && puppies.length > 0) { %>
                        <p class="section-subtitle">
                            <%= puppies.length %> chiot<%= puppies.length > 1 ? 's' : '' %> 
                            <% if (marriage.availablePuppies > 0) { %>
                                • <%= marriage.availablePuppies %> disponible<%= marriage.availablePuppies > 1 ? 's' : '' %>
                            <% } %>
                        </p>
                        <% } %>
                    </div>
                    <% if (puppies && puppies.length > 0) { %>
                    <div class="row g-4">
                        <% puppies.forEach((puppy, index) => { %>
                        <div class="col-xl-3 col-lg-4 col-md-6 col-sm-6" data-aos="fade-up" data-aos-delay="<%= index * 50 %>">
                            <article class="puppy-card">
                                <div class="puppy-card-image">
                                    <a href="/chiots/<%= puppy.breed.slug %>/<%= puppy.slug %>">
                                        <img src="<%= puppy.image.path %>" 
                                             alt="<%= puppy.image.alt || puppy.name %>" 
                                             onerror="this.onerror=null; this.src='/img/placeholder-puppy.jpg';" />
                                    </a>
                                    <div class="puppy-gender-badge <%= puppy.gender === 'Male' ? 'male' : 'female' %>">
                                        <i class="fas <%= puppy.gender === 'Male' ? 'fa-mars' : 'fa-venus' %>"></i>
                                    </div>
                                    <% 
                                    let statusClass = '';
                                    let statusIcon = '';
                                    
                                    if (puppy.status === 'À vendre' || puppy.status === 'Disponible à la réservation') {
                                        statusClass = 'status-available';
                                        statusIcon = 'fa-check-circle';
                                    } else if (puppy.status === 'En cours de réservation') {
                                        statusClass = 'status-pending';
                                        statusIcon = 'fa-clock';
                                    } else if (puppy.status === 'Réservé') {
                                        statusClass = 'status-reserved';
                                        statusIcon = 'fa-bookmark';
                                    } else if (puppy.status === 'Vendu') {
                                        statusClass = 'status-sold';
                                        statusIcon = 'fa-check-double';
                                    }
                                    %>
                                    <div class="puppy-status-badge <%= statusClass %>">
                                        <i class="fas <%= statusIcon %>"></i>
                                        <span><%= puppy.status %></span>
                                    </div>
                                </div>
                                <div class="puppy-card-body">
                                    <%
                                    // Déterminer le chemin selon le statut
                                    let puppyPath = puppy.status === 'Vendu' ? '/chiots/produits' : '/chiots/a-vendre';
                                    %>
                                    <h3 class="puppy-card-name">
                                        <a href="<%= puppyPath %>/<%= puppy.breed.slug %>/<%= puppy.slug %>">
                                            <%= puppy.name %>
                                        </a>
                                    </h3>
                                    <div class="puppy-card-info">
                                        <% if (puppy.breed.type) { %>
                                        <div class="puppy-info-item">
                                            <i class="fas fa-dog"></i>
                                            <span><%= puppy.breed.type %></span>
                                        </div>
                                        <% } %>
                                        <% if (puppy.color) { %>
                                        <div class="puppy-info-item">
                                            <i class="fas fa-palette"></i>
                                            <span><%= puppy.color %></span>
                                        </div>
                                        <% } %>
                                        <% if (puppy.eyeColor) { %>
                                        <div class="puppy-info-item">
                                            <i class="fas fa-eye"></i>
                                            <span><%= puppy.eyeColor %></span>
                                        </div>
                                        <% } %>
                                    </div>
                                    <a href="<%= puppyPath %>/<%= puppy.breed.slug %>/<%= puppy.slug %>" class="puppy-card-btn">
                                        Voir le profil
                                        <i class="fas fa-arrow-right"></i>
                                    </a>
                                </div>
                            </article>
                        </div>
                        <% }); %>
                    </div>
                    <% } else { %>
                    <div class="text-center py-5" data-aos="fade-up">
                        <div class="no-puppies-message">
                            <i class="fas fa-heart fa-3x text-muted mb-4"></i>
                            <h3>Aucun chiot en ligne</h3>
                            <p class="text-muted mb-4">Les chiots de cette portée ne sont pas encore disponibles ou ont tous trouvé leur famille</p>
                            <a href="/contact" class="btn-contact-puppies">
                                <i class="fas fa-envelope me-2"></i>
                                Nous contacter pour plus d'infos
                            </a>
                        </div>
                    </div>
                    <% } %>
                </div>
            </section>
        </main>
        <%- include('../front/frontEndAssets/footer') %>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
        <script src="/front/js/header.js"></script>
        <%- include('./partials/googleAnalytics') %>
        <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
        <script>
            AOS.init({
                duration: 1000,
                easing: "ease-in-out",
                once: true,
                offset: 120,
                delay: 0,
                anchorPlacement: "top-bottom",
                mirror: false,
                disable: "mobile",
            });
        </script>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const toggleBtn = document.getElementById("dogFiltersToggle");
                const menu = document.getElementById("dogFiltersMenu");

                if (toggleBtn && menu) {
                    toggleBtn.addEventListener("click", function () {
                        menu.classList.toggle("active");
                        toggleBtn.classList.toggle("active");
                    });
                    document.addEventListener("click", function (e) {
                        if (!toggleBtn.contains(e.target) && !menu.contains(e.target)) {
                            menu.classList.remove("active");
                            toggleBtn.classList.remove("active");
                        }
                    });
                }
            });
        </script>
    </body>
</html>
